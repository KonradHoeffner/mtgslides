<!doctype html>
<html lang="de">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Magic: the Gathering Slide Generator</title>
	<link rel="stylesheet" href="css/screen.css">
</head>
<body>

<form method="GET" action="slideshow.html">
  <textarea id="cardNames" name="cardNames" rows="25" cols="100"></textarea>
  <button type="submit" name="source" value="conglomerate">Start Slideshow</button>
  <input type="button" value="Example Slides" onclick="exampleSlides()"/>
  <input type="file" value="Upload Cardnames" id="upload"/>
  <input type="button" value="Clear" onclick='document.getElementById("cardNames").value="";'/>
</form>

<script>
function exampleSlides()
{
 document.getElementById("cardNames").value=
`# Paradox Hanna High Power EDH Deck
Hanna, Ship's Navigator
#Paradox Engine|Power Artifact|Transmute Artifact|Memory Jar|Timetwister
# Combo
High Tide|Time Spiral|Frantic Search|Treachery
Isochron Scepter|Dramatic Reversal|Gilded Lotus|Sol Ring|Mox Diamond
Isochron Scepter|Dramatic Reversal|Gilded Lotus|Sol Ring|Mox Diamond|Copy Artifact|Swan Song
Sensei's Divining Top|Future Sight|Helm of Awakening 
Opalescence|Parallax Wave|Parallax Tide
#Mind Stone|Aether Spellbomb|Phyrexian Furnace
#Mind Stone|Aether Spellbomb|Phyrexian Furnace|Paradox Engine|Sol Ring|Gilded Lotus

#Ramp and Mana Fixing
Sol Ring|Mox Diamond|Mind Stone|Sky Diamond|Gilded LotusLotus Petal|Grim Monlith|Basalt Monolith|Land Tax|Tithe
#Card Selection
Ponder|Brainstorm|Preordain|Sensei's Divining Top|Scroll Rack
#Card Draw
## Permanent
Mystic Remora|Rhystic Study|Future Sight
## One Time
Fact or Fiction|Dig Through Time||Timetwister|Windfall|Time Spiral|Memory Jar|Braingeyser|Stroke of Genius


# Interaction
## Counterspells
Force of Will|Misdirection|Mana Drain|Counterspell|Arcane Denial|Spell Pierce|Swan Song|Decree of Silence
## Removal 
Wrath of God|Terminus|Swords to Plowshares|Parallax Wave|Treachery|Aura of Silence|Ensnaring Bridge|Propaganda

# Recursion
Hanna, Ship's Navigator|Academy Ruins|Sun Titan|Open the Vaults|Replenish

# Tutors
Enlightened Tutor|Mystical Tutor|Intuition

#Basalt Monolith|Grim Monolith|Power Artifact
Braingeyser|Stroke of Genius|Aetherflux Reservoir
Trinket Mage|Sol Ring|Aether Spellbomb|Phyrexian Furnace
#Tezzeret the Seeker
#Sol Ring|Mox Diamond|Gilded Lotus
#Tundra|Hallowed Fountain|Flooded Strand|Windswept Heath|Polluted Delta|Command Tower|Island|Plains|Academy Ruins|Inventor's Fair
#Ancient Tomb|Mystic Gate|Adarkar Wastes|Glacial Fortress|Port Town|Nimbus Maze
Ancient Tomb|Mystic Gate|Arid Mesa|Scalding Tarn|Misty Rainforest|Marsh Flats`
}

const uploadButton = document.getElementById("upload");
uploadButton.addEventListener("change",upload);

function upload()
{
 console.log("upload started");
 const files = uploadButton.files;
 if(files.length > 0)
 {
 console.log("file selected");
  const file = files[0];
  const reader = new FileReader();
  reader.addEventListener("load",()=>
  {
   console.log("loading file");
   const cardNames = document.getElementById("cardNames");
   cardNames.value = "";
   for(let line of reader.result.split("\n"))
   {
    line = line.trim();
    if(line.startsWith("#")||line.startsWith("//")) {continue;} // ignore comments
    console.log(line);
    // remove card multiplicities
    line = line.replace(/^[0-9]+/,"");
    cardNames.value+=line.trim()+"\n";
   }
  });
  reader.readAsText(file);
 }
}
</script>

<h3>Explanation</h3>
Each input line creates one slide that shows the given cards.
Multiple cards need to be separated by the "|" character.
<h3>Questions and Contributions</h3>
This is a quick hack developed <a href="https://github.com/konradhoeffner/mtgslides">on GitHub</a>. Feel free to contribute a pull request or to open an issue to report bugs, ask questions or propose additions.
</body>
</html>
